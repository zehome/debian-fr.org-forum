<xsl:stylesheet version="2.0" xmlns:html="http://www.w3.org/TR/REC-html40" xmlns:sitemap="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> <xsl:output method="html" version="1.0" encoding="utf-8" omit-xml-declaration="yes" doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" indent="yes" /> <xsl:template match="/"> <xsl:variable name="fileType"> <xsl:choose> <xsl:when test="//sitemap:url">Sitemap</xsl:when> <xsl:otherwise>SitemapIndex</xsl:otherwise> </xsl:choose> </xsl:variable> <xsl:variable name="browser"> <xsl:choose><xsl:when test="system-property('xsl:vendor')='Transformiix'">mozilla</xsl:when> <xsl:otherwise>other</xsl:otherwise> </xsl:choose> </xsl:variable> <xsl:variable name="sorting"> <xsl:choose><xsl:when test="$browser='mozilla'">descending</xsl:when> <xsl:otherwise>ascending</xsl:otherwise> </xsl:choose> </xsl:variable> <xsl:variable name="home_link">http://www.debian-fr.org/</xsl:variable> <html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="fr" xml:lang="fr"> <head> <base href="http://www.debian-fr.org/test/"/> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> <title> <xsl:choose><xsl:when test="$fileType='Sitemap'">Sitemap : <xsl:choose><xsl:when test="sitemap:urlset/sitemap:url/sitemap:loc='http://www.debian-fr.org/'"><xsl:value-of select="substring-after('http://www.debian-fr.org/', 'http://')"></xsl:value-of></xsl:when> <xsl:otherwise><xsl:value-of select="substring-after(sitemap:urlset/sitemap:url/sitemap:loc, 'http://www.debian-fr.org/')"/></xsl:otherwise></xsl:choose></xsl:when> <xsl:otherwise>SitemapIndex</xsl:otherwise> </xsl:choose> </title> <link rel="stylesheet" href="http://www.debian-fr.org/test/gym_sitemaps/gym_style.php?action=google&amp;type=css&amp;lang=fr&amp;theme_id=2" type="text/css" media="screen, projection"/> <link href="http://www.debian-fr.org/test/gym_sitemaps/style/normal.css" rel="stylesheet" type="text/css" title="A" /> <link href="http://www.debian-fr.org/test/gym_sitemaps/style/medium.css" rel="alternate stylesheet" type="text/css" title="A+" /> <link href="http://www.debian-fr.org/test/gym_sitemaps/style/large.css" rel="alternate stylesheet" type="text/css" title="A++" /> <script type="text/javascript" src="http://www.debian-fr.org/test/gym_sitemaps/style/gym_js.js"></script> </head> <body id="phpbb"> <div id="wrap"> <a id="top" name="top" accesskey="t"></a> <div id="page-header"> <div class="headerbar"> <div class="inner"><span class="corners-top"><span></span></span> <div id="site-description"><a href="{$home_link}" title="Page principale" id="logo"><img src="http://www.debian-fr.org/test/gym_sitemaps/images/site_logo.gif" alt="Le forum debian-fr.org" /></a> <h1>Le forum debian-fr.org</h1> <p>Communaut&#233; debian francophone</p> <p style="display: none;"><a href="#start_here">Aller au contenu</a></p> </div> <div id="search-box"> <form action="http://www.debian-fr.org/test/search.php" method="post" id="search"> <fieldset> <input name="keywords" id="keywords" type="text" maxlength="128" title="" class="inputbox search" value="" /> <input class="button2" value="Rechercher" type="submit" /><br /> <a href="http://www.debian-fr.org/test/search.php" title="Voir les options de la recherche avanc&#233;e">Recherche avanc&#233;e</a> </fieldset> </form> </div> <span class="corners-bottom"><span></span></span> </div> </div> <div class="navbar"> <div class="inner"><span class="corners-top"><span></span></span> <ul class="linklist navlinks"> <li class="icon-home"> <a href="{$home_link}" accesskey="h">Page principale</a> <xsl:if test="$home_link != 'http://www.debian-fr.org/test/'"> &#160;<strong>&#8249;</strong>&#160;<a href="http://www.debian-fr.org/test/">Index du forum</a> </xsl:if> <xsl:if test="$fileType='Sitemap'"> <xsl:variable name="sitemap_link"><xsl:value-of select="sitemap:urlset/sitemap:url/sitemap:loc"/></xsl:variable> <xsl:if test="'http://www.debian-fr.org/test/' != $sitemap_link">&#160;<strong>&#8249;</strong>&#160;<a href="{$sitemap_link}"> <xsl:value-of select="substring-after($sitemap_link, 'http://www.debian-fr.org/')"/></a></xsl:if> </xsl:if></li> <li class="rightside"><a href="#" onclick="fontsizeup(); return false;" class="fontsize" title="Modifier la taille de la police">Modifier la taille de la police</a></li> </ul> <ul class="linklist leftside"> <li class="icon-ucp"> <xsl:choose> <xsl:when test="$fileType='Sitemap'">Sitemap de : <a href="{sitemap:urlset/sitemap:url/sitemap:loc}"> <xsl:value-of select="substring-after(sitemap:urlset/sitemap:url/sitemap:loc, 'http://www.debian-fr.org/')"/></a></xsl:when> <xsl:otherwise>SitemapIndex</xsl:otherwise> </xsl:choose> </li> </ul> <ul class="linklist rightside"> <li class="icon-faq"><a href="http://www.debian-fr.org/test/faq.php" title="Foire aux questions">FAQ</a></li> <li class="icon-register"><a href="http://www.debian-fr.org/test/ucp.php?mode=register">Inscription</a></li> </ul> <span class="corners-bottom"><span></span></span> </div> </div> </div> <a name="start_here"></a> <div id="page-body"><br/> <div class="clear"></div> <div class="post bg3"> <div class="inner"><span class="corners-top"><span></span></span> <xsl:choose> <xsl:when test="$fileType='Sitemap'"><h2><a href="{sitemap:urlset/sitemap:url/sitemap:loc}">Sitemap de : <xsl:choose><xsl:when test="sitemap:urlset/sitemap:url/sitemap:loc='http://www.debian-fr.org/'"><xsl:value-of select="substring-after('http://www.debian-fr.org/', 'http://')"></xsl:value-of></xsl:when> <xsl:otherwise><xsl:value-of select="substring-after(sitemap:urlset/sitemap:url/sitemap:loc, 'http://www.debian-fr.org/')"/></xsl:otherwise> </xsl:choose> </a></h2> <h4>Nombre d&#8217;URLs dans ce Sitemap Google : <xsl:value-of select="count(sitemap:urlset/sitemap:url)"></xsl:value-of></h4> </xsl:when> <xsl:otherwise><h2>SitemapIndex</h2> <h4>Nombre de Sitemaps dans ce SitemapIndex Google : <xsl:value-of select="count(sitemap:sitemapindex/sitemap:sitemap)"></xsl:value-of></h4></xsl:otherwise> </xsl:choose><br/> <span class="corners-bottom"><span></span></span> </div> </div><br/> <xsl:choose> <xsl:when test="$fileType='Sitemap'"> <xsl:call-template name="sitemapTable"/></xsl:when> <xsl:otherwise><xsl:call-template name="siteindexTable"/></xsl:otherwise> </xsl:choose> </div> </div> <div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a> &#169; 2000 - 2008 phpBB Group</div> <div class="copyright"><a href="http://www.phpbb-seo.com/" title="GYM Sitemaps &amp; RSS &#169; 2006, 2007, 2008 phpBB SEO" class="copyright"><img src="http://www.debian-fr.org/test/gym_sitemaps/images/phpbb-seo.png" alt="Optimisation du r&#233;f&#233;rencement"/></a></div> </body> </html> </xsl:template> <xsl:template name="siteindexTable"> <div class="forumbg"> <div class="inner"><span class="corners-top"><span></span></span> <ul class="topiclist"> <li class="header"> <dl class="icon"> <dt>URL du Sitemap</dt> <dd class="lastpost"><span>Derni&#232;re modification</span></dd> </dl> </li> </ul> <xsl:apply-templates select="sitemap:sitemapindex/sitemap:sitemap"></xsl:apply-templates> <span class="corners-bottom"><span></span></span></div> </div> </xsl:template> <xsl:template name="sitemapTable"> <div class="forumbg"> <div class="inner"><span class="corners-top"><span></span></span> <ul class="topiclist"> <li class="header"> <dl class="icon"> <dt>Lien</dt> <dd class="topics">Priorit&#233;</dd> <dd class="posts">Fr&#233;quence de M&#224;j</dd> <dd class="lastpost"><span>Derni&#232;re modification</span></dd> </dl> </li> </ul> <xsl:apply-templates select="sitemap:urlset/sitemap:url"></xsl:apply-templates> <span class="corners-bottom"><span></span></span></div> </div> </xsl:template> <xsl:template match="sitemap:url"> <ul class="topiclist forums"> <li class="row"> <dl class="icon" style="background-image: url(http://www.debian-fr.org/test/gym_sitemaps/images/forum_read.gif); background-repeat: no-repeat;"> <dt style="overflow:hidden"><xsl:variable name="sitemapURL"><xsl:value-of select="sitemap:loc"/></xsl:variable> <a href="{$sitemapURL}" class="topictitle"><span> <xsl:choose> <xsl:when test="$sitemapURL='http://www.debian-fr.org/'"> <xsl:value-of select="substring-after('http://www.debian-fr.org/', 'http://')"></xsl:value-of> </xsl:when> <xsl:otherwise> <xsl:choose> <xsl:when test="contains($sitemapURL,'http://www.debian-fr.org/')"> <xsl:value-of select="substring-after($sitemapURL, 'http://www.debian-fr.org/')"></xsl:value-of> </xsl:when> <xsl:otherwise> <xsl:value-of select="$sitemapURL"></xsl:value-of> </xsl:otherwise> </xsl:choose> </xsl:otherwise> </xsl:choose> </span></a> </dt> <dd class="topics"><span><xsl:value-of select="sitemap:priority"/></span></dd> <dd class="posts"><span><xsl:value-of select="sitemap:changefreq"/></span></dd> <dd class="lastpost"><span><xsl:value-of select="sitemap:lastmod" /></span></dd> </dl> </li> </ul> </xsl:template> <xsl:template match="sitemap:sitemap"> <ul class="topiclist forums"> <li class="row"> <dl class="icon" style="background-image: url(http://www.debian-fr.org/test/gym_sitemaps/images/topic_read.gif); background-repeat: no-repeat;"> <dt style="overflow:hidden"><xsl:variable name="sitemapURL"><xsl:value-of select="sitemap:loc"/></xsl:variable> <a href="{$sitemapURL}" class="forumtitle"><span> <xsl:choose><xsl:when test="$sitemapURL='http://www.debian-fr.org/'"><xsl:value-of select="substring-after('http://www.debian-fr.org/', 'http://')"></xsl:value-of></xsl:when> <xsl:otherwise><xsl:value-of select="substring-after($sitemapURL, 'http://www.debian-fr.org/')"></xsl:value-of></xsl:otherwise> </xsl:choose> </span></a></dt> <dd class="lastpost"><span><xsl:value-of select="sitemap:lastmod" /></span></dd> </dl> </li> </ul> </xsl:template> </xsl:stylesheet> 